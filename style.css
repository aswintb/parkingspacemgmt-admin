/* ===============================================
  /* ===============================================
   THEME COLOR VARIABLES
   =============================================== */
:root {
    /* Dark Theme (Default) */
    --bg-primary: #11131A; --bg-secondary: #1A1D26; --bg-tertiary: #2A2F3D;
    --border-color: #2A2F3D; --text-primary: #E0E0E0; --text-secondary: #8A91A0;
    
    /* UPDATED SLOT COLORS */
    --slot-available-bg: #2E403D;
    --slot-occupied-bg: #4B2B33;
    --slot-reserved-bg: #514224;
    --slot-maintenance-bg: #333;
    --slot-selected-bg: var(--accent-blue);

    --accent-red: #F44336; --accent-yellow: #FFC107; --accent-blue: #2196F3;
    --accent-green: #4CAF50; --accent-blue-glow: rgba(33, 150, 243, 0.6);
}

body.light-theme {
    /* Light Theme */
    --bg-primary: #F4F6F8; --bg-secondary: #FFFFFF; --bg-tertiary: #E9ECEF;
    --border-color: #DEE2E6; --text-primary: #1A1D26; --text-secondary: #6c757d;

    /* UPDATED SLOT COLORS */
    --slot-available-bg: #E8F5E9;
    --slot-occupied-bg: #FFEBEE;
    --slot-reserved-bg: #FFF8E1;
    --slot-maintenance-bg: #ced4da;
    --slot-selected-bg: var(--accent-blue);
}

/* ===============================================
   GLOBAL STYLES & LAYOUT
   =============================================== */
body {
    font-family: 'Inter', sans-serif; background-color: var(--bg-primary);
    color: var(--text-primary); margin: 0; height: 100vh; overflow: hidden;
    transition: background-color 0.3s, color 0.3s;
}
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: var(--bg-primary); }
::-webkit-scrollbar-thumb { background: var(--bg-tertiary); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-secondary); }

.app-container { display: flex; height: 100vh; }
.content-wrapper { flex-grow: 1; padding: 0 30px 30px 30px; overflow-y: auto; display: flex; flex-direction: column; }
.main-header { display: flex; justify-content: space-between; align-items: center; padding: 20px 0; background-color: var(--bg-primary); border-bottom: 1px solid var(--border-color); position: sticky; top: 0; z-index: 10; margin-bottom: 20px; }
h1 { margin: 0; font-weight: 600; font-size: 28px; letter-spacing: -0.5px; color: var(--text-primary); }
h2 { margin-top: 40px; margin-bottom: 20px; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; font-weight: 500; color: var(--text-primary); }

/* ===============================================
   NAVIGATION SIDEBAR
   =============================================== */
.main-nav { width: 240px; flex-shrink: 0; background-color: var(--bg-secondary); padding: 20px; display: flex; flex-direction: column; border-right: 1px solid var(--border-color); transition: background-color 0.3s, border-color 0.3s; z-index: 20; }
.nav-logo { font-size: 24px; font-weight: 700; text-align: center; margin-bottom: 40px; color: var(--text-primary); }
.logo-accent { color: var(--accent-blue); }
.main-nav ul { list-style: none; padding: 0; margin: 0; }
.nav-item { display: flex; align-items: center; padding: 15px; margin-bottom: 8px; border-radius: 8px; cursor: pointer; transition: all 0.2s; color: var(--text-secondary); font-weight: 500; }
.nav-item:hover { background-color: var(--bg-tertiary); color: var(--text-primary); }
.nav-item.active { background-color: var(--accent-blue); color: white; font-weight: 600; }
.nav-item .material-icons { margin-right: 15px; }

/* ===============================================
   PAGE CONTAINER & THEME SWITCHER
   =============================================== */
.page { display: none; }
.page.active { display: block; }

#theme-switcher { width: 40px; height: 40px; border-radius: 50%; display: grid; place-items: center; background-color: var(--bg-secondary); border: 1px solid var(--border-color); color: var(--text-secondary); cursor: pointer; transition: all 0.2s; }
#theme-switcher:hover { color: var(--accent-blue); border-color: var(--accent-blue); }

/* ===============================================
   SLIDE-OUT PANEL & OVERLAY
   =============================================== */
.details-panel { position: fixed; top: 0; left: 0; width: 380px; height: 100vh; background-color: var(--bg-secondary); border-right: 1px solid var(--border-color); padding: 24px; box-sizing: border-box; z-index: 1001; transform: translateX(-100%); transition: transform 0.4s ease-in-out; box-shadow: 5px 0 25px rgba(0, 0, 0, 0.2); }
.details-panel.open { transform: translateX(0); }
#panel-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1000; transition: opacity 0.4s ease-in-out; }
#panel-overlay.hidden { opacity: 0; pointer-events: none; }
.close-btn { position: absolute; top: 20px; right: 20px; width: 30px; height: 30px; display: grid; place-items: center; background-color: var(--bg-tertiary); border-radius: 50%; cursor: pointer; color: var(--text-secondary); }
.close-btn:hover { color: var(--text-primary); }

/* ===============================================
   DASHBOARD & STATS
   =============================================== */
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
.stat-card { background-color: var(--bg-secondary); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color); display: flex; align-items: center; transition: background-color 0.3s, border-color 0.3s; }
.card-icon { font-size: 40px; margin-right: 20px; }
.card-title { color: var(--text-secondary); margin-bottom: 5px; }
.card-value { font-size: 28px; font-weight: 600; color: var(--text-primary); }
.activity-log, .chart-container, .table-container { background-color: var(--bg-secondary); border-radius: 12px; padding: 20px; border: 1px solid var(--border-color); transition: background-color 0.3s, border-color 0.3s; }
.chart-container h3 { margin: 0 0 15px 0; }
.chart-placeholder { min-height: 250px; display: flex; align-items: center; justify-content: center; color: var(--text-secondary); font-style: italic; }

/* ===============================================
   LAYOUT PAGE & PARKING SLOTS
   =============================================== */
#layout-page {
    height: calc(100vh - 150px);
    display: flex;
    flex-direction: column;
}

.layout-container {
    display: flex;
    gap: 20px;
    align-items: center;
}

.parking-lot-wrapper {
    flex-grow: 1;
    position: relative;
    background-color: var(--bg-tertiary);
    border-radius: 12px;
    padding: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.parking-grid-content { padding-bottom: 15px; }
.parking-row { display: flex; justify-content: center; }
.center-aisle { height: 60px; }
.bike-row { display: flex; justify-content: center; gap: 6px; margin-top: 30px; padding: 10px; background-color: var(--bg-secondary); border-radius: 8px; }

.slot {
    position: relative; display: flex; align-items: center; justify-content: center;
    box-sizing: border-box; cursor: pointer; transition: all 0.2s ease-in-out;
    border-top: 2px solid var(--border-color); color: var(--text-primary);
    font-size: 12px; font-weight: 500; overflow: hidden;
}
.slot span { display: block; transform: skewX(15deg); z-index: 2; }

.car-slot { width: 80px; height: 40px; transform: skewX(-15deg); }
.bike-slot { width: 38px; height: 60px; border: none; border-top: 2px solid var(--border-color); border-radius: 4px; }
.bike-slot span { transform: none; }

/* Slot Statuses & Hovers with NEW COLORS */
.slot.available { background-color: var(--slot-available-bg); border-top-color: var(--accent-green); }
.slot.occupied { background-color: var(--slot-occupied-bg); border-top-color: var(--accent-red); cursor: default; }
.slot.reserved { background-color: var(--slot-reserved-bg); border-top-color: var(--accent-yellow); }
.slot.maintenance { background: repeating-linear-gradient(45deg, var(--slot-maintenance-bg), var(--slot-maintenance-bg) 10px, var(--bg-tertiary) 10px, var(--bg-tertiary) 20px); cursor: not-allowed; }
.slot.selected { background-color: var(--slot-selected-bg) !important; border-color: #fff !important; box-shadow: 0 0 15px var(--accent-blue-glow); }
.car-slot.selected { transform: skewX(-15deg) scale(1.05); }
.bike-slot.selected { transform: scale(1.05); }

.progress-container { position: absolute; bottom: 0; left: 0; right: 0; height: 5px; background-color: rgba(0, 0, 0, 0.2); z-index: 1; }
.progress-fill { height: 100%; width: 0%; background: var(--accent-red); border-radius: 0 2px 2px 0; transition: width 1s linear; }

/* NEW LEGEND STYLES */
.layout-legend {
    flex-shrink: 0;
    width: 150px;
    background-color: var(--bg-secondary);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid var(--border-color);
}
.layout-legend h4 {
    margin: 0 0 15px 0;
    font-weight: 500;
    color: var(--text-secondary);
    text-align: center;
}
.legend-item {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    font-size: 13px;
}
.color-box {
    width: 15px;
    height: 15px;
    border-radius: 3px;
    margin-right: 10px;
    border-top: 2px solid;
}
.color-box.available { background-color: var(--slot-available-bg); border-color: var(--accent-green); }
.color-box.occupied { background-color: var(--slot-occupied-bg); border-color: var(--accent-red); }
.color-box.reserved { background-color: var(--slot-reserved-bg); border-color: var(--accent-yellow); }
.color-box.maintenance { background-color: var(--slot-maintenance-bg); border-color: var(--text-secondary); }
.color-box.selected { background-color: var(--slot-selected-bg); border-color: #fff; }
/* ===============================================
   DETAILS PANEL CONTENT & FORMS
   =============================================== */
.details-panel h2 { margin: 0 0 20px 0; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; font-weight: 500; }
.placeholder { color: var(--text-secondary); text-align: center; margin-top: 40px; }
.form-group { margin-bottom: 20px; }
.form-group label { display: block; margin-bottom: 8px; font-size: 14px; font-weight: 500; color: var(--text-secondary); }
.form-group input { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border-color); background-color: var(--bg-primary); font-size: 16px; box-sizing: border-box; color: var(--text-primary); transition: all 0.2s; }
.form-group input:focus { border-color: var(--accent-blue); outline: none; box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1); }
.quick-select { margin-top: 15px; display: flex; gap: 8px; flex-wrap: wrap; }
.quick-select-btn { background-color: var(--bg-tertiary); border: 1px solid transparent; color: var(--text-secondary); padding: 8px 15px; border-radius: 20px; font-size: 12px; cursor: pointer; transition: all 0.2s; font-weight: 500; }
.quick-select-btn:hover { background-color: var(--accent-blue); color: white; }
.confirm-btn { width: 100%; padding: 15px; border: none; border-radius: 8px; background-color: var(--accent-blue); color: white; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 10px; transition: background-color 0.2s; }
.confirm-btn:hover { background-color: #1976D2; }
.details-view p { margin: 10px 0; }
.details-view strong { color: var(--text-secondary); margin-right: 8px; }
.time-remaining { font-weight: 700; color: var(--accent-yellow); }

/* ===============================================
   HISTORY PAGE & CONTROLS
   =============================================== */
.controls { margin-bottom: 20px; display: flex; gap: 10px; }
.btn { background-color: var(--bg-secondary); border: 1px solid var(--border-color); color: var(--text-secondary); padding: 10px 15px; border-radius: 8px; cursor: pointer; }
.btn.active { background-color: var(--accent-blue); color: white; font-weight: 600; }
#history-search { background-color: var(--bg-secondary); border: 1px solid var(--border-color); color: var(--text-primary); padding: 10px 15px; border-radius: 8px; width: 300px; }
table { width: 100%; border-collapse: collapse; }
th, td { padding: 15px; text-align: left; }
thead { background-color: var(--bg-tertiary); }
th { font-weight: 600; color: var(--text-secondary); font-size: 12px; text-transform: uppercase; }
tbody tr { border-bottom: 1px solid var(--border-color); }
tbody tr:last-child { border-bottom: none; }
tbody tr:hover { background-color: var(--bg-tertiary); }

/* ===============================================
   MOBILE RESPONSIVE STYLES
   (Applies to screens 768px or smaller)
   =============================================== */
@media (max-width: 768px) {
    
    /* 1. Stack the main layout instead of side-by-side */
    .app-container {
        flex-direction: column;
    }

    /* 2. Hide the main navigation sidebar on mobile */
    .main-nav {
        display: none;
        /* A common approach is to replace this with a "hamburger" menu, 
           but for a quick fix, hiding it makes the app usable. */
    }

    /* 3. Make the slide-out panel take up more screen width */
    .details-panel {
        width: 90vw; /* 90% of the viewport width */
    }

    /* 4. Allow parking slots to wrap instead of overflowing */
    .parking-row, .bike-row {
        flex-wrap: wrap; /* Allows items to wrap to the next line */
        justify-content: flex-start; /* Align items to the left */
        gap: 10px;
    }
    
    .parking-grid-content {
        min-width: 100%; /* Remove the fixed minimum width */
    }

    /* 5. Adjust the parking layout container */
    #layout-page {
        height: auto; /* Allow height to be determined by content */
    }

    .layout-container {
        flex-direction: column; /* Stack the legend and parking lot */
        align-items: stretch;
    }
    
    .layout-legend {
        width: auto; /* Make legend full width */
        order: -1; /* Move legend to the top */
        margin-bottom: 20px;
    }

    /* 6. Adjust font sizes and padding for smaller screens */
    h1 {
        font-size: 22px;
    }
    
    .card-value {
        font-size: 24px;
    }
    
    .content-wrapper {
        padding: 0 15px 15px 15px; /* Reduce side padding */
    }
}